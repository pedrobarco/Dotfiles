#!/bin/bash

find -type f -name "*.flac" -print0 | while read -d $'\0' a; do
  parallel ffmpeg -i {} -qscale:a 0 {.}.mp3 ::: ./*.flac
done
find . -type f -name "*.flac" | parallel rm

find -type f -name "*.wav" -print0 | while read -d $'\0' a; do
  parallel ffmpeg -i {} -qscale:a 0 {.}.mp3 ::: ./*.wav
done
find . -type f -name "*.wav" | parallel rm

find -type f -name "*.m4a" -print0 | while read -d $'\0' a; do
  parallel ffmpeg -i {} -qscale:a 0 {.}.mp3 ::: ./*.m4a
done
find . -type f -name "*.m4a" | parallel rm

